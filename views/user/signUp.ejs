<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FitVibe - Sign Up</title>
  <!-- Google Sign-In Script -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Arial', sans-serif;
      line-height: 1.6;
      background: #f4f4f4;
    }
    /* Navbar Styles */
    .navbar {
      background: linear-gradient(90deg, #1a1a1a, #333);
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .navbar .logo {
      font-size: 24px;
      font-weight: bold;
    }
    .navbar a {
      color: white;
      text-decoration: none;
      margin: 0 20px;
      font-size: 16px;
      transition: color 0.3s;
    }
    .navbar a:hover {
      color: #ffd700;
    }
    .nav-right a {
      padding: 8px 15px;
      border: 1px solid #ffd700;
      border-radius: 25px;
      transition: background 0.3s;
    }
    .nav-right a:hover {
      background: #ffd700;
      color: #1a1a1a;
    }
    .nav-right span {
      margin-right: 20px;
      font-size: 16px;
    }
    /* Signup Form Styles */
    .signup-section {
      max-width: 500px;
      margin: 50px auto;
      padding: 40px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      text-align: center;
    }
    .signup-section h2 {
      font-size: 32px;
      margin-bottom: 30px;
      color: #1a1a1a;
    }
    .signup-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .signup-form input {
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ddd;
      border-radius: 5px;
      outline: none;
      transition: border 0.3s;
    }
    .signup-form input:focus {
      border-color: #ffd700;
    }
    .signup-form button {
      padding: 12px;
      font-size: 18px;
      font-weight: bold;
      background: #ffd700;
      color: #1a1a1a;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .signup-form button:hover {
      background: #e6c200;
    }
    .signup-form .google-signin-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
      font-size: 18px;
      font-weight: bold;
      background: #ffffff;
      color: #1a1a1a;
      border: 1px solid #ddd;
      border-radius: 25px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .signup-form .google-signin-btn img {
      width: 20px;
      margin-right: 10px;
    }
    .signup-form .google-signin-btn:hover {
      background: #f8f8f8;
    }
    .signup-form .login-link {
      margin-top: 15px;
      font-size: 14px;
      color: #666;
    }
    .signup-form .login-link a {
      color: #ffd700;
      text-decoration: none;
    }
    .signup-form .login-link a:hover {
      text-decoration: underline;
    }
    /* Footer Styles */
    .footer {
      background: linear-gradient(90deg, #1a1a1a, #333);
      color: white;
      padding: 40px 20px;
      text-align: center;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
      position: relative;
      bottom: 0;
      width: 100%;
    }
    .footer a {
      color: #ffd700;
      text-decoration: none;
      margin: 0 15px;
      font-size: 16px;
      transition: color 0.3s;
    }
    .footer a:hover {
      color: white;
    }
    .footer p {
      margin: 10px 0;
      font-size: 14px;
    }
    .footer .social-icons {
      margin-top: 20px;
    }
    .footer .social-icons a {
      font-size: 20px;
      margin: 0 10px;
    }
    .error-message {
      color: red;
      font-size: 0.75rem;
      display: none;
    }
  </style>
</head>
<body>
  <!-- Signup Section -->
  <div class="signup-section">
    <h2>Create Your Account</h2>
    <form id="signform" class="signup-form" action="/signup" method="POST">
      <input id="name" type="text" name="name" placeholder="Username" />
      <div id="error1" class="error-message"></div>

      <input id="email" type="email" name="email" placeholder="Email" />
      <div id="error2" class="error-message"></div>

      <input id="phone" type="number" name="phone" placeholder="Phone Number" />
      <div id="error3" class="error-message"></div>

      <input id="password" type="password" name="password" placeholder="Password" />
      <div id="error4" class="error-message"></div>

      <input id="confirmPassword" type="password" name="confirmPassword" placeholder="Confirm Password" />
      <div id="error5" class="error-message"></div>

      <button type="submit">Sign Up</button>
      <a href="/auth/google" class="google-signin-btn" onclick="handleGoogleSignIn()">
        <img src="https://www.google.com/favicon.ico" alt="Google Icon" />
        Sign in with Google
      </a>
    </form>
  </div>

  <script>
    const nameid = document.getElementById("name");
    const emailid = document.getElementById("email");
    const phoneid = document.getElementById("phone");
    const passid = document.getElementById("password");
    const cpassid = document.getElementById("confirmPassword");

    const error1 = document.getElementById("error1");
    const error2 = document.getElementById("error2");
    const error3 = document.getElementById("error3");
    const error4 = document.getElementById("error4");
    const error5 = document.getElementById("error5");

    const signform = document.getElementById("signform");

    function nameValidateChecking(e) {
      const nameval = nameid.value.trim();
      const namepattern = /^[A-Za-z\s]+$/;

      if (nameval === "") {
        error1.style.display = "block";
        error1.innerHTML = "Please enter a valid name";
      } else if (!namepattern.test(nameval)) {
        error1.style.display = "block";
        error1.innerHTML = "Name can only contain alphabets and spaces";
      } else {
        error1.style.display = "none";
        error1.innerHTML = "";
      }
    }

    function emailValidateChecking(e) {
      const emailval = emailid.value;
      const emailpattern = /^[a-zA-Z0-9._-]+@([a-zA-Z0-9.-]+)\.([a-zA-Z]{2,4})$/;

      if (!emailpattern.test(emailval)) {
        error2.style.display = "block";
        error2.innerHTML = "Invalid email format";
      } else {
        error2.style.display = "none";
        error2.innerHTML = "";
      }
    }

    function phoneValidateChecking(e) {
      const phoneval = phoneid.value;

      if (phoneval.trim() === "") {
        error3.style.display = "block";
        error3.innerHTML = "Enter valid phone number";
      } else if (phoneval.length !== 10) {
        error3.style.display = "block";
        error3.innerHTML = "Enter 10 digit number";
      } else {
        error3.style.display = "none";
        error3.innerHTML = "";
      }
    }

    function passValidateChecking(e) {
      const passval = passid.value;
      const cpassval = cpassid.value;
      const alpha = /[a-zA-Z]/;
      const digit = /\d/;

      if (passval.length < 8) {
        error4.style.display = "block";
        error4.innerHTML = "Should contain at least 8 characters";
      } else if (!alpha.test(passval) || !digit.test(passval)) {
        error4.style.display = "block";
        error4.innerHTML = "Should contain numbers and alphabets";
      } else {
        error4.style.display = "none";
        error4.innerHTML = "";
      }

      if (passval !== cpassval) {
        error5.style.display = "block";
        error5.innerHTML = "Passwords do not match";
      } else {
        error5.style.display = "none";
        error5.innerHTML = "";
      }
    }

    document.addEventListener("DOMContentLoaded", function () {
      signform.addEventListener("submit", function (e) {
        nameValidateChecking(e);
        emailValidateChecking(e);
        phoneValidateChecking(e);
        passValidateChecking(e);

        if (
          error1.innerHTML ||
          error2.innerHTML ||
          error3.innerHTML ||
          error4.innerHTML ||
          error5.innerHTML
        ) {
          e.preventDefault();
        }
      });
    });

    // Google Sign-In Handler
    function handleGoogleSignIn() {
      // Initialize Google Sign-In
      google.accounts.id.initialize({
        client_id: 'YOUR_GOOGLE_CLIENT_ID', // Replace with your Google Client ID
        callback: handleCredentialResponse
      });

      // Prompt user to sign in
      google.accounts.id.prompt();
    }

    function handleCredentialResponse(response) {
      // Send the ID token to your backend for verification
      const idToken = response.credential;
      fetch('/google-signin', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ id_token: idToken })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Redirect or update UI after successful sign-in
          alert('Google Sign-In successful!');
          // Example: window.location.href = '/dashboard';
        } else {
          alert('Google Sign-In failed: ' + data.error);
        }
      })
      .catch(error => {
        console.error('Error during Google Sign-In:', error);
        alert('An error occurred during Google Sign-In.');
      });
    }
  </script>
</body>
</html>